{% extends 'base.html' %}

{% block content %}

<main class="container mt-5">
    <h1 class="text-center">Detalle de Tutoría Grupal</h1>
    <h2>Nombre de la tutoría: {{ tutoria_grupal.nombreGrupo }}</h2>
    <p>Tutor: {{tutoria_grupal.idTutor.nombre}}</p>
    <p>Salón: {{ tutoria_grupal.salon }}</p>
    <p>ID: {{tutoria_grupal.idTutoriaGrupal}}</p>
    <!-- Otros detalles de la tutoría individual -->

    <h2>Tutorados inscritos:</h2>
    {% for tutorado in tutorados_pertenecientes %}
    <!-- Mostrar información del tutorado aquí -->
    <p>{{ tutorado.idTutorado.nombre }} {{ tutorado.idTutorado.apellidoPaterno }}</p>
    <!-- Otros campos del tutorado -->
    {% endfor %}


    <!-- Mostrar las bitácoras del tutor -->
    {% if rol == 'Tutor' %}

    <h3>Reunión '{{ videoconferencia_grupal.first.topic }}':</h3>

    {% if videoconferencia_grupal %}

    <a href="{{ videoconferencia_grupal.first.start_url }}" target="_blank"
        class="btn btn-success mb-2 boton-exito">Iniciar reunión</a>

    <form method="POST" action="{% url 'eliminar_reunion_grupal' videoconferencia_grupal.first.meeting_code %}">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger mb-2 boton-eliminar">Eliminar</button>
    </form>

    {% else %}

    <a href="{% url 'crear_reunion_grupal'  tutoria_grupal.idTutoriaGrupal %}"
        class="btn btn-primary mb-2 custom-button-small">Crear Reunión</a>

    {% endif %}



    <h3>Bitacora del Tutor:</h3>
    <ul class="list-group">
        {% for bitacora in bitacoras_grupales %}
        <li class="list-group-item">{{ bitacora.nota }}</li>
        <p class="list-group-item">{{bitacora.fecha}}</p>
        {% endfor %}
    </ul>
    <!--Para crear una bitacora-->
    <a href="{% url 'bitacora_tutor_tutoriaGrupal' tutoria_id=tutoria_grupal.idTutoriaGrupal %}"
        class="btn btn-primary mb-2 custom-link">Crear Bitácora
        Grupal</a>


    <h3>Anuncios Grupales del Tutor:</h3>
    <ul class="list-group">
        {% for anuncio in anuncios_grupales %}
        <li class="list-group-item">{{ anuncio.nota }}</li>
        <p class="list-group-item">{{anuncio.fecha}}</p>
        {% endfor %}
    </ul>
    <!--Para crear un anuncio al grupo-->
    <a href="{% url 'anuncio_tutor_tutoriaGrupal' tutoria_id=tutoria_grupal.idTutoriaGrupal %}"
        class="btn btn-primary mb-2 custom-link">Crear Anuncio Grupal</a>

    <!-- Mostrar las notas del tutorado -->
    {% elif rol == 'Tutorado' %}

    <h3>Reunión '{{ videoconferencia_grupal.first.topic }}':</h3>

    {% if videoconferencia_grupal %}

    <a href="{{ videoconferencia_grupal.first.join_url }}" target="_blank"
        class="btn btn-success mb-2 boton-exito">Unirse a la reunión</a>

    {% else %}

    <p>Aún no hay enlace para que te puedas unir</p>

    {% endif %}


    <h3>Anuncios Grupales del Tutor:</h3>
    <ul class="list-group">
        {% for anuncio in anuncios_grupales %}
        <li class="list-group-item">{{ anuncio.nota }}</li>
        <p class="list-group-item">{{anuncio.fecha}}</p>
        {% endfor %}
    </ul>

    {% endif %}


    <br>
    <!-- Botón de Regresar -->
    <button type="button" class="btn btn-outline-secondary back-button" onclick="goBack()" style="margin-top: 20px;">
        Regresar
    </button>

</main>

<script>
    // Función para regresar a la página anterior
    function goBack() {
        window.history.back();
    }
</script>

{% endblock %}